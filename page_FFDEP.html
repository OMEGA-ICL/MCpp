<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>MC++: Structure and Dependency Detection for Factorable Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=HTML-CSS/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MC++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_FFDEP.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Structure and Dependency Detection for Factorable Functions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Benoit C. Chachuat </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2011 </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000001">Bug:</a></b></dt><dd>No known bugs.</dd></dl>
<p><a class="el" href="classmc_1_1FFDep.html" title="C++ class for evaluation of the sparsity pattern of a factorable function. ">mc::FFDep</a> is a C++ class that determines the structure of mathematical expressions, namely their sparsity pattern and linearity, for a given set of participating variables. It relies on the operator overloading and function overloading mechanisms of C++. The overloaded operators are: `+', `-', `*', and `/'; the overloaded functions are: `exp', `log', `sqr', `pow', `sqrt', `fabs', `xlog', `min', `max', `cos', `sin', `tan', `acos', `asin' and `atan'.</p>
<h1><a class="anchor" id="sec_FFDepEval"></a>
How Do I Determine the Structure of a Factorable Function?</h1>
<p>Suppose you are given 4 variables \(x_1,\ldots,x_4\) and want to determine the sparsity pattern and linearity of the vector following function </p><p class="formulaDsp">
\begin{eqnarray*} {\bf f}({\bf x}) = \left(\begin{array}{c} f_1({\bf x})\\ f_2({\bf x})\end{array}\right) = \left(\begin{array}{c} x_3 x_4+x_1\\x_1(\exp(x_3-x_4))^2+x_2 \end{array}\right) \end{eqnarray*}
</p>
<p>First, define the variables \(x_1,\ldots,x_4\) as</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> NX = 4;</div><div class="line">FFDep X[NX];</div><div class="line"><span class="keywordflow">for</span>( <span class="keywordtype">int</span> i=0; i&lt;NX; i++ ) X[i].indep(i);</div></div><!-- fragment --><p>Essentially, the first line means that <code>X</code> is an array of <a class="el" href="classmc_1_1FFDep.html" title="C++ class for evaluation of the sparsity pattern of a factorable function. ">mc::FFDep</a> class objects, and the second line defines X[0],...X[NX-1] as independent variables with indices 0,...,NX-1, respectively.</p>
<p>Once the independent variables \({\bf x}\) have been defined, determine the structure of \({\bf f}({\bf x})\) simply as</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> NF = 2;</div><div class="line">FFDep F[NF] = { X[2]*X[3]+X[0],</div><div class="line">                X[0]*pow(exp(X[2]-X[3]),2)+X[1] };</div></div><!-- fragment --><p>Retrieve the structure - both the sparsity pattern and the linearity - of \(f_1\) and \(f_2\) as</p>
<div class="fragment"><div class="line">std::map&lt;int,bool&gt; F0_dep = F[0].dep();</div><div class="line">std::map&lt;int,bool&gt; F1_dep = F[1].dep();</div></div><!-- fragment --><p>You can also display the structure as</p>
<div class="fragment"><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Variable dependence of F[0]: &quot;</span> &lt;&lt; F[0] &lt;&lt; std::endl;</div><div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;Variable dependence of F[1]: &quot;</span> &lt;&lt; F[1] &lt;&lt; std::endl;</div></div><!-- fragment --><p>The corresponding output is</p>
<pre class="fragment">      Variable dependence of F[0]: { 0L 2NL 3NL }
      Variable dependence of F[1]: { 0NL 1L 2NL 3NL }
</pre><p>which indicates that X[0], X[2] and X[3] participate in F[0], but not X[1]. Moreover, X[0] participates linearly, unlike X[2] and X[3].</p>
<h1><a class="anchor" id="sec_FFDepErr"></a>
Errors Encountered in Determining the Structure of a Factorable Function?</h1>
<p>Errors are managed based on the exception handling mechanism of the C++ language. Each time an error is encountered, a class object of type FFDep::Exceptions is thrown, which contains the type of error. It is the user's responsibility to test whether an exception was thrown during a calculation, and then make the appropriate changes. Should an exception be thrown and not caught by the calling program, the execution will stop.</p>
<p>Possible errors encountered in determining the structure of a factorable function are:</p>
<a class="anchor" id=""></a>
<table  border="1">
<caption><em>Errors during Structure Determination</em></caption>
<tr>
<th><b>Number</b> </th><td><b>Description</b> </td></tr>
<tr>
<th><code>-33</code> </th><td>Error due to calling a feature not yet implemented in <a class="el" href="classmc_1_1FFDep.html" title="C++ class for evaluation of the sparsity pattern of a factorable function. ">mc::FFDep</a> </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Apr 26 2017 08:37:18 for MC++ by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
